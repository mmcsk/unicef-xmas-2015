var Later=function(a){a=a||{};var b={};b.settings={useLocalStorage:!1,autostart:!0,autoSend:0};var c={},d={},e={version:"0.7.21",author:"Marek J. Kolcun"};b.info=function(){return console.info(e),e},b.register=function(a){return"undefined"!=typeof a&&a.length?(c[a]=l(a),c[a].initialized(!0),c[a].ctrl.restore(),c[a]):(console.error("No argument inserted."),{})},b.free=function(a){"undefined"!=typeof c[a]&&delete c[a]},b.init=function(a){var c="undefined"!=typeof a?a:document,d=c.querySelectorAll("[data-ljs-s]");b.loadTemplates();for(var e in d)if(d[e]instanceof HTMLElement)if("function"==typeof d[e].querySelector&&null!=d[e].querySelector("[data-ljs-s]")&&d[e].querySelector("[data-ljs-s]").length)init(c);else if("undefined"!=typeof d[e].dataset)"undefined"!=typeof d[e].dataset.ljsS&&this.register(d[e].dataset.ljsS);else if(null!=d[e].getAttribute("data-ljs-s")){var f=d[e].getAttribute("data-ljs-s");null!=f&&f.length&&this.register(f)}},b.setup=function(a){if("object"==typeof a)for(i in this.settings)this.settings.hasOwnProperty(i)&&"undefined"!=typeof a[i]&&(this.settings[i]=a[i]);return this.settings},b.unsaveAll=function(){for(var a in c)c.hasOwnProperty(a)&&c[a].ctrl.unsave()},b.loadTemplates=function(){for(var a=document.getElementsByTagName("template"),b=0;b<a.length;b++){var c=a[b];null!=c.getAttribute("name")&&(d[c.getAttribute("name")]=f(c))}};var f=function(a){try{var b=document.importNode(a.content,!0)}catch(c){for(var b=document.createDocumentFragment(),d=a.childNodes,e=0;e<d.length;e++)b.appendChild(d[e].cloneNode(!0));return b.cloneNode(!0)}return b};b.compare=function(a,b){if(typeof a!=typeof b)return!1;if("object"!=typeof a)return a==b;var c=[],d=[];for(var e in a)a.hasOwnProperty(e)&&c.push(a[e]);for(var e in b)b.hasOwnProperty(e)&&d.push(b[e]);if(c.length!=d.length)return!1;for(var e=0;e<c.length;e++)if(c[e]!=d[e])return!1;return!0};var g=function(a){if(null===a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)b[c]=g(a[c]);return b};b.template=function(a){return"undefined"==typeof a?d:"undefined"!=typeof d[a]?d[a].cloneNode(!0):!1};var h=function(a,b){var c=a.replace(/\+/,""),d=new RegExp("\\S+\\."+c+"$"),e=new RegExp("^"+c+"\\.\\S+"),f=new RegExp("\\S+\\."+c+"\\.\\S+"),g=new RegExp("^"+b+"$");return a.match(g)||a.match("GLOBAL")||a.match(/^\+/)&&b.match(d)||a.match(/\+$/)&&b.match(e)||a.match(/^\+.*\+$/)&&b.match(f)};b.ajaxer=function(){var a={},b=new XMLHttpRequest,c=0,e=function(a,b){var c=[];for(var d in a)if(a.hasOwnProperty(d)){var f=encodeURIComponent(d),g="undefined"!=typeof b?b+"["+f+"]":f,h="object"==typeof a[d]?e(a[d],g):g+"="+encodeURIComponent(a[d]);c.push(h)}return c.join("&")},f=function(a,d,f,g){"undefined"==typeof g&&"function"==typeof f&&(g=f),"undefined"==typeof f&&(f={}),b.open(a,d,!0),b.setRequestHeader("Content-type","application/x-www-form-urlencoded"),b.setRequestHeader("X-Requested-With","XMLHttpRequest"),b.onreadystatechange=function(){return c=b.status,4==b.readyState&&200==c?"function"==typeof g?g(b.responseText):b.response:void 0},["GET","DELETE"].indexOf(a)>-1?b.send():b.send(e(f))};return a.get=function(a,b,c){f("GET",a,b,c)},a.put=function(a,b,c){f("PUT",a,b,c)},a.post=function(a,b,c){f("POST",a,b,c)},a["delete"]=function(a,b,c){f("DELETE",a,b,c)},a}(),b.section=function(a){return"undefined"!=typeof a?"undefined"!=typeof c[a]?c[a]:{}:c};var j=function(a){return-1!=["checkbox","radio"].indexOf(a.getAttribute("type"))||"SELECT"===a.tagName},k=function(a,b){if("undefined"!=typeof c[a])var d=c[a].getDom();else{var d=document.createElement("div");d.setAttribute("data-ljs-s",a)}var e=[],f=!1;if("SELECT"==b.tagName){var g=b.selectedOptions;f="selected"}else if(j(b)){var g=d.querySelectorAll('[name="'+b.getAttribute("name")+'"]');f="checked"}else var g=[b];for(var h in g)g.hasOwnProperty(h)&&null!=g[h].value&&(!f||g[h][f])&&e.push(g[h].value);return e.length>1?e:e.length?e[0]:""},l=function(a){var c={},d=[],e={},f={GLOBAL:0},l=document.createElement("div"),m=!1,n={section:!1,varList:[]},o={get:"",put:"",post:"","delete":""};c.name=function(){return a},c.initialized=function(a){return"undefined"==typeof a?m:("boolean"==typeof a&&(m=a),m)},c.getDom=function(){var b=document.querySelectorAll('[data-ljs-s="'+a+'"]');return b.length?b[0]:(null==l.getAttribute("data-ljs-s")&&l.setAttribute("data-ljs-s",a),l)};var p=function(a){var b=["DIV","SPAN","BUTTON","A"];return-1!=b.indexOf(a.tagName)||"submit"==a.type?"click":j(a)||"range"==a.type?"change":"input"},q=function(a,b,d){var e=p(b);d=d||"";var f=r(b),g=f.length?f+".":"";if(d.length)g+=d;else{var h=b.getAttribute("name").replace(/\[.*?\]/,"");g+=h}b.addEventListener(e,function(){if(d.length){var e=c.call.registered(g);for(var f in e)e.hasOwnProperty(f)&&e[f](g)}else{var i=k(a,b);c.ctrl.set(g,i)}s(h)},!1)},r=function(a){for(var b=[];null!=a.parentElement&&!a.parentElement.hasAttribute("data-ljs-s");)a.hasAttribute("data-ljs-i")&&b.unshift(a.getAttribute("data-ljs-i")),a=a.parentElement;return b.join(".")};c.useLocalStorage=function(a,b){if("undefined"==typeof a&&"undefined"==typeof b)return n;if(b=b||[],"boolean"==typeof a&&!b.length)return n.section=a,void(n.varList=[]);if("object"!=typeof a||b.length||(b=a,a=!0),"boolean"==typeof a&&b.length){c.ctrl.get();if(a)n.varList=n.varList.concat(b),n.varList=n.varList.reduce(function(a,b){return a.indexOf(b)<0&&a.push(b),a},[]);else for(var e in b){var f=n.varList.indexOf(b[e]);-1!=f&&n.varList.splice(f,1)}}},c.autoSend=function(a,b){if("undefined"==typeof a&&"undefined"==typeof b)return f;if("undefined"==typeof b){if("string"==typeof a)return"undefined"!=typeof f[a]?f[a]:(console.warn("Variable `"+a+"` has not set autoSend delay time or does not exist."),0);if("number"==typeof a)return a=a>0?a:0,f.GLOBAL=a,f.GLOBAL}return"string"==typeof a&&"number"==typeof b?b>=0?(f[a]=b,b):(delete f[a],0):(console.warn("First argument `"+a+"` must be type of string and second `"+b+"` must be type of (int) number."),0)};var s=function(a){if(b.settings.autoSend||c.autoSend.GLOBAL||"undefined"!=typeof f[a]){var d=0;if(d="undefined"!=typeof f[a]?f[a]:c.autoSend.GLOBAL?c.autoSend.GLOBAL:b.settings.autoSend){var g=(new Date).getTime();"undefined"==typeof e[a]?e[a]={delay:d,endAt:g+parseInt(d),interval:setInterval(function(){var b=(new Date).getTime();e[a].endAt<b&&(c.ctrl.send(),clearInterval(e[a].interval),delete e[a])},d)}:e[a].endAt>g&&(e[a].endAt=g+e[a].delay)}}};return c.sendPaths=function(a){if("undefined"==typeof a)return o;for(var b in a)a.hasOwnProperty(b)&&"undefined"!=typeof o[b]&&"string"==typeof a[b]&&(o[b]=a[b]);return o},c.send=function(a,d){var e="get"!=a?c.ctrl.get():void 0,f=o[a];b.ajaxer[a](f,e,d)},c.call=function(){var a={},b={};return a.register=function(a,c,d){return"undefined"==typeof d&&(d=c,c=a,a="GLOBAL"),"undefined"==typeof c?(console.error("Created listener function must be named."),!1):"undefined"==typeof d||"function"!=typeof d?(console.error('Registered "'+c+'" is not a function.'),!1):("undefined"==typeof b[a]&&(b[a]={}),b[a][c]=d,!0)},a.unregister=function(a,c){return"undefined"==typeof c&&(c=a,a="GLOBAL"),"undefined"!=typeof b[a][c]?(delete b[a][c],!0):(console.error('Unregistered "'+c+'" is not defined in "'+a+'" listeners list.'),!1)},a.unregisterAll=function(){b={}},a.registered=function(a){var c={};a="undefined"!=typeof a?a:"GLOBAL";for(var d in b)if(b.hasOwnProperty(d)&&h(d,a))for(var e in b[d])b[d].hasOwnProperty(e)&&(c[d+"_"+e]=b[d][e]);return c},a.registeredAll=function(){return b},a.run=function(a,c,d){return"undefined"==typeof c&&(c=a,a="GLOBAL"),"function"==typeof b[a][c]?b[a][c](d):(console.error('Called "'+c+'" listener function is not a registered "'+a+'" listener.'),!1)},a.rebuild=function(a){var b={};for(var c in a)"function"==typeof callbacks[a[c]]&&(b[a[c]]=callbacks[a[c]]);callbacks=b.copy()},a}(),c.ctrl=function(){var d={},e="",f={},h=function(a,b,c,d){var e=b.shift(),f="undefined"!=typeof a[e]?a[e]:{};return d&&!b.length?delete a[e]:a[e]=b.length?h(f,b,c,d):c,a};d.load=function(a){return b.ajaxer.get(e,{},function(b){var e=JSON.parse(b);for(var f in e)e.hasOwnProperty(f)&&d.set(f,e[f],!1);c.view.refresh(),"function"==typeof a&&a()})},d.save=function(){if("undefined"!=typeof window.localStorage){"undefined"==typeof window.localStorage["ljs_"+a]&&(window.localStorage["ljs_"+a]="");var b={};if(n.varList.length)for(var c in f)f.hasOwnProperty(c)&&-1!=n.varList.indexOf(c)&&(b[c]=f[c]);else b=f;return window.localStorage["ljs_"+a]=JSON.stringify(b),!0}return null},d.restore=function(b){if(j()&&"undefined"!=typeof window.localStorage["ljs_"+a]){var c=JSON.parse(window.localStorage["ljs_"+a]);for(var e in c)c.hasOwnProperty(e)&&d.set(e,c[e]);return!0}return null},d.unsave=function(){return"undefined"!=typeof window.localStorage&&"undefined"!=typeof window.localStorage["ljs_"+a]?delete window.localStorage["ljs_"+a]:null};var j=function(a){return a="undefined"!=typeof a?a:null,"undefined"!=typeof window.localStorage&&m&&(b.settings.useLocalStorage||n.section||null!=a&&-1!=n.varList.indexOf(a))};return d.get=function(a,b){if("undefined"==typeof a)return g(f);if(null==a)return console.warn("Cannot get value of `null`."),null;b="undefined"!=typeof b?b:f,"string"==typeof a&&(a=a.split("."));var c=a.shift();return a.length?d.get(a,b[c]):"object"==typeof b[c]?g(b[c]):b[c]},d.set=function(a,b,e){if(e="boolean"==typeof e?e:null,"undefined"==typeof b)for(var g in a)a.hasOwnProperty(g)&&d.set(g,a[g],e);else if("object"==typeof a&&"boolean"==typeof b)for(var g in a)a.hasOwnProperty(g)&&d.set(g,a[g],e);else{var i=c.ctrl.get(a);if(i!=b){var k=a.split(".");f=h(f,k,b),e=null!=e?e:!0}"undefined"!=typeof c.view&&e&&c.view.refresh(a),j(a)&&d.save()}},d.del=function(a){"undefined"==typeof a?f={}:h(f,a.split("."),null,!0)},d.isset=function(a,b){if(b="undefined"!=typeof b?b:f,"string"==typeof a)var a=a.split(".");var c=a.shift();return"undefined"!=typeof b[c]?a.length?d.isset(a,b[c]):!0:!1},d}(c.getDom),c.view=function(){var f={},h="",l=function(){h=c.getDom().cloneNode(!0),f.refresh(null);for(var a=document.getElementsByTagName("template"),b=0,d=a.length;d>b;b++)a[b].style.display="none"},m=function(a,b,c){return"undefined"==typeof a.style[b]?(console.error('Specified "style" variable ('+b+") does not exist."),!1):(a.style[b]=c,!0)};f.reset=function(){var a=c.getDom();a=h},f.getTemplate=function(){return h.cloneNode(!0)},f.setTemplate=function(a,b){for(;h.firstChild;)h.removeChild(h.firstChild);h.appendChild(a),b=b||!1,b&&f.refresh()},f.setContent=function(a,b){for(var d=c.getDom();d.firstChild;)d.removeChild(d.firstChild);d.appendChild(a.cloneNode(!0)),b=b||!1,b&&f.refresh()},f.getContent=function(){for(var a=document.createDocumentFragment(),b=c.getDom().childNodes,d=0;d<b.length;d++)a.appendChild(b[d].cloneNode(!0));return a.cloneNode(!0)},f.refresh=function(a){if(a=a||null,f.isHidden())return!0;var b=c.getDom(),e=h.cloneNode(!0);if(o(b,e,a),p(b,e,a),A(b,a),B(b),z(b),null!=a&&-1==d.indexOf(a)){d.push(a);var g=c.call.registered();for(var i in g)g.hasOwnProperty(i)&&g[i](a);if("string"==typeof a){var g=c.call.registered(a);for(var i in g)g.hasOwnProperty(i)&&g[i](a)}}d.splice(d.indexOf(a),1)};var o=function(b,c,d){if(null==b.getAttribute("data-ljs-s")||b.getAttribute("data-ljs-s")===a){var e=c.children.length;if(e)for(var f=0;e>f;f++)o(b.children[f],c.children[f],d);else{s(b,c,d);var g=c.children.length;if(g>e){e=g;for(var f=0;e>f;f++)o(b.children[f],c.children[f],d)}}}},p=function(b,c,d){if(null==b.getAttribute("data-ljs-s")||b.getAttribute("data-ljs-s")===a){var e=c.children.length;if(e)for(var f=0;e>f;f++)p(b.children[f],c.children[f],d);else x(b,c,d)}},s=function(a,b,c){var d=!1,e=new RegExp("\\{\\{(\\S+)\\s+in\\s+(\\S+)\\}\\}","g"),f=b.textContent.match(e);if(null!=f){for(var g=u(f),h=0;h<a.childNodes.length;h++)for(var i=0;i<f.length;i++)a.childNodes[h].textContent.match(f[i])&&(a.childNodes[h].textContent="");t(a,b,g)}return d},t=function(a,b,c){var d=c.children.length,e=a.children.length,f=b.children.length;if(d&&d==e&&d==f)for(var g=0;d>g;g++)t(a.children[g],b.children[g],c.children[g]);else if(d){for(;d<a.children.length;)a.removeChild(a.lastElementChild);for(;d<b.children.length;)b.removeChild(b.lastElementChild);if(d!=e)for(var g=0;d>g;g++)"undefined"==typeof a.children[g]&&a.appendChild(c.children[g].cloneNode(!0));if(d!=f)for(var g=0;d>g;g++)"undefined"==typeof b.children[g]&&b.appendChild(c.children[g].cloneNode(!0))}else{for(var g=0;g<c.attributes;g++)a.setAttribute(c.attributes[g].nodeName,c.attributes[g].value),b.setAttribute(c.attributes[g].nodeName,c.attributes[g].value);a.textContent=c.textContent,b.textContent=c.textContent}},u=function(a){for(var d=b.register("_temp"),e=new RegExp("\\{\\{(\\S+)\\s+in\\s+(\\S+)\\}\\}"),f=document.createElement("div"),g=0;g<a.length;g++){var h=a[g].match(e),i=h[2].split("."),j=b.template(h[1]),k=c.ctrl.get(h[2]);if(!j||"undefined"==typeof k)return f;for(var l=0,m=k.length;m>l;l++){d.view.setTemplate(b.template(h[1]));var n=d.view.getTemplate(),o=i.length>2?i.slice(-1)[0]:i.join(".");v(n,l,h[2]),n.firstElementChild.setAttribute("data-ljs-i",o+"."+l),f.appendChild(n.firstElementChild)}}return b.free("_temp"),f},v=function(a,b,c){var d=a.children.length;if(d)for(var e=0;d>e;e++)v(a.children[e],b,c);else{for(var f=new RegExp("\\{\\{(\\S+)\\}\\}","g"),g=new RegExp("\\{\\{(\\S+)\\}\\}"),h=0,i=a.attributes.length;i>h;h++){var j=a.attributes[h].value.match(f);if(null!=j)for(var k=0;k<j.length;k++){var l=j[k].match(g);null!=l&&(a.attributes[h].value=a.attributes[h].value.replace(l[0],"{{"+c+"."+b+"."+l[1]+"}}"))}}a.textContent=a.textContent.replace(/\{\{(\S*?)\}\}/g,"{{"+c+"."+b+".$1}}").replace(/(\{\{.*?in\s)(\S*?)\}\}/g,"$1"+c+"."+b+".$2}}")}},w=function(a,b,d,e){var f=a.match(b),g=a,h=!1;if(null!=f)for(var i=0,j=f.length;j>i;i++){var k=f[i].replace(/[\{\}]/g,"");k==e&&(h=!0);var l=c.ctrl.get(k);l="undefined"!=typeof l?l:"",g=g.replace(f[i],l)}return[g,h]},x=function(a,b,d){var e=null!=d?c.ctrl.get(d):null,f=new RegExp("\\{\\{.+?\\}\\}","g"),g=null!=d?new RegExp("\\{\\{"+d+".*?\\}\\}","g"):f,h=new RegExp("^ljs-(\\S+)$"),i=!1,j=[];if(!(b.hasAttribute("data-ljs-e")||b.hasAttribute("data-ljs-x")||b.hasAttribute("ljs-x")||b.hasAttribute("ljs-e"))){for(var k=0,l=b.attributes.length;l>k;k++){var m=b.attributes[k],n=b.attributes[k].nodeName.match(h);if(null!=n&&-1==["ljs-s","ljs-l","ljs-i","ljs-e","ljs-x"].indexOf(n[0])){var o=w(m.value,f,e,d),p={name:n[1],value:o[0]};i=o[1],j.push({oldNode:m.nodeName,newNode:p})}var q=b.attributes[k].value.match(g);if(null!=q){var r=w(b.attributes[k].value,f,e,d);a.attributes[k].value=r[0],i=r[1]}}for(var k in j)j.hasOwnProperty(k)&&(a.removeAttribute(j[k].oldNode),a.setAttribute(j[k].newNode.name,j[k].newNode.value))}var s=b.textContent.match(g);if(null!=s&&null!=s){var r=w(b.textContent,f,e,d);a.textContent!=r[0]&&(a.textContent=r[0]),i=r[1]}if(null!=b.value&&"string"==typeof b.value){var q=b.value.match(g);if(null!=q){var r=w(b.value,f,e,d);a.value=r[0],i=r[1]}}return i},z=function(a){var d=(c.ctrl.get(),a.querySelectorAll("[name]"));if(d.length)for(var e=0,f=d.length;f>e;e++)if(d[e]instanceof HTMLElement){var g=d[e].name.replace(/\[.*/,""),h=r(d[e]),i=h.length?h+"."+g:g,k=c.ctrl.get(i);if("undefined"!=typeof k){k=k instanceof Array?k:[k];for(var l=0,m=k.length;m>l;l++)k[l]=k[l].toString();if("SELECT"===d[e].tagName)for(var n=d[e].getElementsByTagName("option"),l=0,m=n.length;m>l;l++)n[l].selected=!1,-1!=k.indexOf(n[l].value)&&(n[l].selected=!0);else j(d[e])?(d[e].checked=!1,-1!=k.indexOf(d[e].value)&&(d[e].checked=!0)):d[e].value!==k[0]&&(d[e].value=k[0])}}},A=function(b,d){var e=b.querySelectorAll("[name]");for(var f in e)if(e[f]instanceof HTMLElement){var g=r(e[f]),h=e[f].getAttribute("name").replace(/\[.*/,"");h=g.length?g+"."+h:h;var i=d==h?c.ctrl.get(d):c.ctrl.get(h),j=null!=i?i:k(a,e[f]);e[f].hasAttribute("data-ljs-e")||(e[f].setAttribute("data-ljs-e",!0),q(a,e[f])),j!=i&&c.ctrl.set(h,j,!1)}},B=function(b){var c=b.querySelectorAll("[data-ljs-l]");for(var d in c)if(c[d]instanceof HTMLElement){var e=null;"undefined"!=typeof c[d].dataset&&"undefined"!=typeof c[d].dataset.ljsL?e=c[d].dataset.ljsL:null!=c[d].getAttribute("data-ljs-l")&&(e=c[d].getAttribute("data-ljs-l")),null==e||c[d].hasAttribute("data-ljs-x")||(c[d].setAttribute("data-ljs-x",!0),q(a,c[d],e))}};return f.show=function(a){var b=c.getDom();a=a||"inline-block",b.style.display!=a&&(b.style.display=a)},f.hide=function(){var a=c.getDom();"none"!=a.style.display&&(a.style.display="none")},f.isHidden=function(){var a=c.getDom();return"none"==a.style.display},f.toggle=function(){f.isHidden()?f.show():f.hide()},f.css=function(a,b){var d=c.getDom();if("undefined"!=typeof b)m(d,a,b);else if("object"==typeof a)for(i in a)m(d,i,a[i])},f.addClass=function(a){var b=c.getDom();b.classList.contains(a)||b.classList.add(a)},f.removeClass=function(a){var b=c.getDom();b.classList.contains(a)&&b.classList.remove(a)},f.toggleClass=function(a){var b=c.getDom();b.classList.toggle(a)},f.hasClass=function(a){var b=c.getDom();return b.classList.contains(a)},l(),f}(c.getDom),c.view.getIterationIndexes=r,c};return b.setup(a),b.settings.autostart&&b.init(),b};